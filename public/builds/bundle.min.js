!function(t){function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}([function(t,e){t.exports=jQuery},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(6),i=n(7),r=n(2),s=n(0),l=n.n(s),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),c=function(){function t(){a(this,t)}return u(t,null,[{key:"addButtons",value:function(t){this.addEditButton(t),this.addDownloadButton(t);var e=window.location.href;e.includes("dropbox")?this.addSaveButtonDropbox(t):e.includes("onedrive")&&this.addSaveButtonOneDrive(t)}},{key:"removeButtons",value:function(){l()("#edit-button").remove(),l()("#download-button").remove(),l()("#save-button").remove()}},{key:"addEditButton",value:function(t){l()("#edit-button-field").html('\n\t\t\t<button id="edit-button"\n\t\t\t\t aria-label="Edit image"\n\t\t\t\t title="Edit image"\n\t\t\t   class="mdl-button\n\t\t\t\t        mdl-js-button\n\t\t\t\t        mdl-button--fab\n\t\t\t\t        mdl-button--primary\n\t\t\t\t\t\t\t\tanimated bounceIn">\n\t\t\t  <i class="material-icons">\n\t\t\t\t  edit\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t'),l()("#edit-button").click(function(){r.a.launchEditor("editable-image",""+t)})}},{key:"addDownloadButton",value:function(t){l()("#download-button-field").html('\n\t\t\t<a href="'+t+'" download\n\t\t\t   id="download-button"\n\t\t\t\t aria-label="Download image"\n\t\t\t\t title="Download image"\n\t\t\t   class="mdl-button\n\t\t\t\t        mdl-js-button\n\t\t\t\t        mdl-button--fab\n\t\t\t\t        mdl-button--primary\n\t\t\t\t\t\t\t\tanimated bounceIn">\n\t\t\t  <i class="material-icons">\n\t\t\t\t  file_download\n\t\t\t\t</i>\n\t\t\t</a>\n\t\t')}},{key:"addSaveButtonDropbox",value:function(t){l()("#save-button-field").html('\n      <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--primary has-hover"\n              id="save-button"\n              aria-label="Save image on Dropbox"\n              title="Save image on Dropbox">\n        <i class="material-icons" id="save-icon">\n          cloud_upload\n        </i>\n      </button>\n    '),l()("#save-button").click(function(){Dropbox.save(o.a.getSaverOptions(""+t))})}},{key:"addSaveButtonOneDrive",value:function(t){l()("#save-button-field").html('\n      <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--primary has-hover"\n              id="save-button"\n              aria-label="Save image on OneDrive"\n              title="Save image on OneDrive">\n        <i class="material-icons" id="save-icon">\n          cloud_upload\n        </i>\n      </button>\n    '),l()("#save-button").click(function(){i.a.launchOneDriveSaver(""+t)})}},{key:"reStyleSaveButton",value:function(){var t=l()("#save-button");t.attr("title","Image is saved"),t.attr("aria-label","Image is saved"),t.css("color","#2196F3"),t.attr("disabled",!0),l()("#save-icon").html("done"),t.css("background-color"),t.removeClass("has-hover")}}]),t}();e.a=c},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(1),i=n(3),r=n.n(i),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),l=function(){function t(){a(this,t)}return s(t,null,[{key:"instantiateFeather",value:function(){var t=this;this.feather=new Aviary.Feather({apiKey:r.a.Aviary,theme:"minimum",tools:"all",appendTo:"",displayImageSize:!0,showWaitIndicator:!0,launchDelay:500,closeDelay:500,onSave:function(e,n){t.newURL=n,$("#"+e).attr("src",n),t.handleButtons(e,n),t.feather.close()},onClose:function(e){e&&!window.location.href.endsWith("google-drive")&&o.a.addEditButton(t.newURL)},onError:function(t){Message.show(t.message,"user-message-error")}})}},{key:"handleButtons",value:function(t,e){var n=window.location.href;switch(!0){case n.endsWith("local"):o.a.addDownloadButton(e);break;case n.endsWith("dropbox"):o.a.addButtons(e);break;case n.endsWith("onedrive"):o.a.addButtons(e);break;case n.endsWith("google-drive"):GoogleDriveHandler.addActionButtons(t,e)}}},{key:"launchEditor",value:function(t,e){return this.feather.launch({image:t,url:e}),!1}}]),t}();e.a=l},function(t,e){t.exports={Aviary:"eb5f4fca52634bbf94da9389bd974012",OneDrive:"9EF624643062CD5EFEF9F188B817B2AE724806A9",Google:"117700549617-ol49l4bkna7ch6qbb44gubuj3t2p8vep.apps.googleusercontent.com"}},function(t,e){t.exports={Google:{success:{upload:"The image was successfully uploaded to your Google Drive!",remove:"The image was successfully removed from your Google Drive!"},error:{upload:"The image failed to upload to your Google Drive!",drive:"Error! Could not get image from Google Drive.",amazon:"An error occurred! Failed to get the edited image. Therefore an upload to your Google Drive can not be pursued."},info:{noValidImages:"No valid images (Png, Jpg/Jpeg) found in your Google Drive."}},Local:{success:{},error:{invalidFile:"Invalid file! The file has to be a Png or Jpg/Jpeg image. Please try again."}},OneDrive:{success:{upload:"Image was successfully uploaded to your OneDrive!"},error:{}}}},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=function(){function t(){a(this,t)}return r(t,null,[{key:"showSuccess",value:function(t){var e=i()("#success-toast")[0],n={message:t,timeout:1e4};e.MaterialSnackbar.showSnackbar(n)}}]),t}();e.a=s},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=n(1),s=n(5),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),u=function(){function t(){a(this,t)}return l(t,null,[{key:"getChooserOptions",value:function(){var t=this;return{success:function(e){var n=e[0].link;t.image=e[0],i()("#editable-image").attr("src",n),r.a.removeButtons(),r.a.addEditButton(n)},linkType:"direct",multiselect:!1,extensions:[".png",".jpg",".jpeg"]}}},{key:"getSaverOptions",value:function(t){return{files:[{url:""+t,filename:""+this.image.name}],success:function(){i()(".spinner").addClass("is-hidden");var t="Image was successfully uploaded to your Dropbox!";s.a.showSuccess(t),r.a.reStyleSaveButton()},progress:function(t){i()(".spinner").removeClass("is-hidden")},error:function(t){Message.show(t,"user-message-error")}}}},{key:"addClickEvent",value:function(){var t=this;i()("#choose-button").click(function(){Dropbox.choose(t.getChooserOptions())})}}]),t}();e.a=u},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=n(1),s=n(8),l=n(5),u=n(3),c=n.n(u),d=n(4),v=n.n(d),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),m=function(){function t(){a(this,t)}return f(t,null,[{key:"launchOneDrivePicker",value:function(){var t={clientId:c.a.OneDrive,action:"download",success:function(t){var e=t.value[0]["@microsoft.graph.downloadUrl"];i()("#editable-image").attr("src",e),r.a.removeButtons(),r.a.addEditButton(e)},error:function(t){s.a.show(t,"user-message-error")}};OneDrive.open(t)}},{key:"launchOneDriveSaver",value:function(t){var e={clientId:c.a.OneDrive,action:"save",sourceUri:t,fileName:"testImage.png",openInNewWindow:!0,success:function(t){l.a.showSuccess(v.a.OneDrive.success.upload),i()(".spinner").addClass("is-hidden"),r.a.reStyleSaveButton()},progress:function(t){i()(".spinner").removeClass("is-hidden")},error:function(t){s.a.show(t,"user-message-error")}};OneDrive.save(e)}},{key:"addClickEvent",value:function(){var t=this;i()("#choose-button").click(function(){OneDrive.open(t.launchOneDrivePicker())})}}]),t}();e.a=m},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=function(){function t(){a(this,t)}return r(t,null,[{key:"show",value:function(t,e){var n=this;i()("#user-message-field").html('\n      <div id="'+e+'" class="user-message animated flash">\n        '+t+" "+this.getCloseButton()+"\n\t\t\t</div>\n\t\t"),i()("#close-message-button").click(function(){n.remove()})}},{key:"remove",value:function(){i()("#user-message-field").html("")}},{key:"getCloseButton",value:function(){return'\n      <i class="material-icons"\n\t\t\t   id="close-message-button"\n\t\t\t   title="Close message"\n\t\t\t\t aria-label="Close message">\n        close\n\t\t\t</i>\n\t\t'}}]),t}();e.a=s},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(2),i=n(8),r=n(5),s=n(4),l=n.n(s),u=n(3),c=n.n(u),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),v=function(){function t(){a(this,t)}return d(t,null,[{key:"init",value:function(){this.imageArray=[],this.imageList=$("#image-list"),this.currentImageName="",this.lastEditedImageID="",$("#loading-animation").hide()}},{key:"checkAuth",value:function(){gapi.auth.authorize({client_id:c.a.Google,scope:["https://www.googleapis.com/auth/drive"].join(" "),immediate:!0},t.handleAuthResult)}},{key:"handleAuthResult",value:function(e){e&&!e.error?(t.hideLoginElements(),t.loadDriveApi()):t.showLoginElements()}},{key:"hideLoginElements",value:function(){$("#need-to-login-text").hide(),$("#google-info-text").hide(),$("#signin-button").hide()}},{key:"showLoginElements",value:function(){$("#need-to-login-text").show(),$("#google-info-text").show(),$("#signin-button").show()}},{key:"loadDriveApi",value:function(){gapi.client.load("drive","v3",t.requestImages)}},{key:"requestImages",value:function(){$("#loading-animation").show(),t.imageList.html("");var e=gapi.client.drive.files.list({maxResults:100,fields:"files",q:'mimeType = "image/png" or\n\t\t\t      mimeType = "image/jpg" or\n\t\t\t\t\t\tmimeType = "image/jpeg"'});e.execute(function(e){var n=e.files;if(t.imageArray=n,n&&n.length>0){var a=!0,o=!1,i=void 0;try{for(var r,s=n[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var u=r.value;t.renderImage(u)}}catch(t){o=!0,i=t}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}}else $("#top-text").html(l.a.Google.info.noValidImages);$("#loading-animation").hide()})}},{key:"renderImage",value:function(e){var n=e.webContentLink.replace(/&export=download/i,"");t.imageList.append('\n\t\t\t<div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--3-col animated zoomIn"\n\t\t\t     itemscope itemtype ="http://schema.org/ImageObject">\n\t\t\t\t<div class="mdl-card__title">\n\t\t\t\t\t<h2 class="mdl-card__title-text" itemprop="name">\n\t\t\t\t\t  '+e.originalFilename+'\n\t\t\t\t\t</h2>\n\t\t\t\t</div>\n\t\t\t\t<div class="mdl-card__media">\n\t\t\t\t  <a href="'+n+'"\n\t\t\t\t\t   title="View large image"\n\t\t\t\t\t\t aria-label="View large image">\n\t\t\t\t\t  <img itemprop="thumbnail"\n\t\t\t\t\t\t   id="'+e.id+'"\n\t\t\t\t\t\t   src="'+e.thumbnailLink+'"\n\t\t\t\t\t\t   class="card-thumbnails"\n\t\t\t\t\t\t   alt="'+e.originalFilename+'" />\n\t\t\t\t  </a>\n\t\t\t\t</div>\n\t\t\t\t<div class="mdl-card__actions" id="actions-for-'+e.id+'">\n\t\t\t\t\t<i title="Edit image"\n\t\t\t\t\t\t aria-label="Edit image"\n\t\t\t\t\t   class="material-icons"\n\t\t\t\t\t\t id="edit-button"\n\t\t\t\t\t   onclick="GoogleDriveHandler.getImageFromDrive(\''+e.id+'\')">\n\t\t\t\t\t  edit\n\t\t\t\t\t</i>\n\t\t\t\t  <a href="'+e.webContentLink+'" download>\n\t\t\t\t\t\t<i alt="Download '+e.originalFilename+' original"\n\t\t\t\t\t\t   title="Download original image"\n\t\t\t\t\t\t\t aria-label="Download original image"\n\t\t\t\t\t\t   class="material-icons">\n\t\t\t\t\t\t  cloud_download\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</a>\n\t\t\t\t\t<i title="Delete image"\n\t\t\t\t\t   aria-label="Delete image"\n\t\t\t\t\t\t class="material-icons"\n\t\t\t\t\t\t onclick="GoogleDriveHandler.showConfirmation(\''+e.id+"', '"+e.originalFilename+"')\">\n\t\t\t\t\t  delete_forever\n\t\t\t\t  </i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")}},{key:"addActionButtons",value:function(e,n){t.addDownloadButton(e,n),t.addUploadButton(e,n)}},{key:"addDownloadButton",value:function(t,e){var n=$("#actions-for-"+t);n.append('\n\t\t\t<a href="'+e+'" download>\n\t\t\t\t<i alt="Download edited '+t+'"\n\t\t\t\t   title="Download edited image"\n\t\t\t\t\t aria-label="Download edited image"\n\t\t\t\t   class="material-icons animated flash">\n\t\t\t\t  file_download\n\t\t\t\t</i>\n\t\t\t</a>\n\t\t')}},{key:"addUploadButton",value:function(t,e){var n=$("#actions-for-"+t);n.append('\n\t\t\t<i alt="Upload edited '+t+'"\n\t\t\t   title="Upload edited image"\n\t\t\t\t aria-label="Upload edited image"\n\t\t\t   class="material-icons"\n\t\t\t   onclick="GoogleDriveHandler.getImageFromAmazon(\''+e+"')\">\n\t\t\t  cloud_upload\n\t\t\t</i>\n\t\t")}},{key:"addConfirmationText",value:function(t){$("#confirmation-text").html("\n\t\t\t<ul>\n\t\t\t  <li>You are about to delete image: "+t+"</li>\n\t\t\t  <li>The image will be permanently deleted</li>\n\t\t\t  <li>\n\t\t\t\t  It will <strong>NOT</strong> be placed in\n\t\t\t\t\tyour Google Drive trashbin.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<p>Are you really sure?</p>\n\t\t")}},{key:"showConfirmation",value:function(e,n){var a=$("#confirm-dialog")[0];a.showModal||dialogPolyfill.registerDialog(a),t.addConfirmationText(n),a.showModal(),a.querySelector(".confirm").addEventListener("click",function(){a.close(),t.deleteImageFromDrive(e)}),a.querySelector(".cancel").addEventListener("click",function(){a.close()})}},{key:"deleteImageFromDrive",value:function(e){document.body.className="cursor-wait";var n=gapi.client.drive.files.delete({fileId:e});n.execute(function(e){e.hasOwnProperty("code")?i.a.show("\n\t\t\t\t  Image couldn't be deleted.\n\t\t\t\t\tDetails: "+e.code+": "+e.message,"user-message-error"):(t.requestImages(),r.a.showSuccess(l.a.Google.success.remove)),document.body.className="cursor-default"})}},{key:"getImageFromDrive",value:function(e){t.lastEditedImageID=e,i.a.remove();var n=gapi.auth.getToken().access_token,a="https://www.googleapis.com/drive/v3/files/"+e+"?alt=media",r=new XMLHttpRequest;r.onloadend=function(){var n=new FileReader;n.onload=function(){t.setCurrentImageName(e),o.a.launchEditor(e,n.result)},n.readAsDataURL(r.response)},r.onerror=function(){return i.a.show(l.a.Google.error.drive,"user-message-error")},r.open("GET",a),r.responseType="blob",r.setRequestHeader("Authorization","Bearer "+n),r.send()}},{key:"getImageFromAmazon",value:function(e){var n=new XMLHttpRequest;n.onload=function(){return t.postImageToDrive(n.response)},n.onerror=function(){return i.a.show(l.a.Google.error.drive,"user-message-error")},n.open("GET",e),n.responseType="blob",n.send()}},{key:"postImageToDrive",value:function(e,n){document.body.className="cursor-wait";var a="-------314159265358979323846",o="\r\n--"+a+"\r\n",s="\r\n--"+a+"--",u=new FileReader;u.readAsBinaryString(e),u.onload=function(){var c=btoa(u.result),d={title:t.currentImageName,mimeType:e.type},v=o+"Content-Type: application/json\r\n\r\n"+JSON.stringify(d)+o+"Content-Type: "+e.type+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+c+s,f=gapi.client.request({path:"/upload/drive/v3/files?uploadType=multipart",method:"POST",headers:{"Content-Type":'multipart/related; boundary="'+a+'"'},body:v});n||(n=function(e){e?(r.a.showSuccess(l.a.Google.success.upload),t.requestImages()):i.a.show(l.a.Google.error.upload,"user-message-error"),document.body.className="cursor-default"}),f.execute(n)}}},{key:"setCurrentImageName",value:function(e){var n=t.currentImageName,a=t.imageArray,o=a.find(function(t){return t.id==e});n=o.originalFilename,o.originalFilename.match(/_Edited/g)||(n=n.substr(0,n.lastIndexOf("."))||n,n+="_Edited"),t.currentImageName=n}}]),t}();e.a=v},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(8),i=n(1),r=n(4),s=n.n(r),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),u=function(){function t(){a(this,t)}return l(t,null,[{key:"init",value:function(){this.preview=$("#editable-image"),this.defaultImagePath="/images/placeholder_image.png",this.setupDroparea()}},{key:"setupDroparea",value:function(){var t=this,e=$("#dropzone"),n=$("#input");e.on("drag dragstart dragend dragover dragenter dragleave drop",function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}).on("click",function(t){n.click()}).on("dragover",function(t){e.css("background-color","#E4F1FE")}).on("dragleave",function(t){e.css("background-color","white")}).on("drop",function(n){e.css("background-color","white");var a=n.originalEvent.dataTransfer.files[0];t.handleFile(a)}),n.on("change",function(e){var n=e.originalEvent.target.files[0];n&&t.handleFile(n)})}},{key:"handleFile",value:function(t){if(this.isValidImageFormat(t))o.a.remove(),i.a.removeButtons(),t?this.createFileReader(t):(this.resetPreview(),i.a.removeButtons());else{var e=s.a.Local.error.invalidFile;o.a.show(e,"user-message-error"),this.resetPreview(),i.a.removeButtons()}}},{key:"createFileReader",value:function(t){var e=this,n=new FileReader;n.onload=function(){e.hideSpinner(),e.updatePreview(n.result),i.a.addEditButton(n.result)},n.onprogress=function(){e.showSpinner()},n.onerror=function(t){o.a.show(t,"user-message-error")},n.readAsDataURL(t)}},{key:"isValidImageFormat",value:function(t){return["image/png","image/jpg","image/jpeg"].includes(t.type)}},{key:"updatePreview",value:function(t){this.preview.attr("src",t)}},{key:"resetPreview",value:function(){this.preview.attr("src",this.defaultImagePath)}},{key:"showSpinner",value:function(){$(".spinner").removeClass("is-hidden")}},{key:"hideSpinner",value:function(){$(".spinner").addClass("is-hidden")}}]),t}();e.a=u},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=function(){function t(){a(this,t)}return o(t,null,[{key:"init",value:function(){this.setupVariables(),this.isBrowserSupported()?(this.requestCamera(),this.setupButtons()):this.displayErrorMessage("\n        Your browser doesn't have support for\n        the navigator.getUserMedia interface.\n      ")}},{key:"setupVariables",value:function(){this.video=$("#camera-stream")[0],this.image=$("#snap")[0],this.startCameraButton=$("#start-camera")[0],this.controls=$(".controls")[0],this.takePhotoButton=$("#take-photo")[0],this.deletePhotoButton=$("#delete-photo")[0],this.downloadPhotoButton=$("#download-photo")[0],this.errorMessage=$("#error-message")[0],this.snap=null}},{key:"isBrowserSupported",value:function(){return navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!!navigator.getMedia}},{key:"requestCamera",value:function(){var t=this;navigator.getMedia({video:!0},function(e){t.video.src=window.URL.createObjectURL(e),t.video.play(),t.video.onplay=function(){t.showVideo()}},function(e){console.log(e),t.displayErrorMessage("\n          There was an error with accessing\n          the camera stream: "+err.name,e)})}},{key:"setupButtons",value:function(){this.setupStartCameraButton(),this.setupTakePhotoButton(),this.setupDeletePhotoButton()}},{key:"setupStartCameraButton",value:function(){var t=this;this.startCameraButton.addEventListener("click",function(e){e.preventDefault(),t.video.play(),t.showVideo()})}},{key:"setupTakePhotoButton",value:function(){var t=this;this.takePhotoButton.addEventListener("click",function(e){e.preventDefault(),t.snap=t.takeSnapshot(),t.image.setAttribute("src",t.snap),t.image.classList.add("visible"),t.deletePhotoButton.classList.remove("disabled"),t.downloadPhotoButton.classList.remove("disabled"),t.downloadPhotoButton.href=t.snap,t.video.pause()})}},{key:"setupDeletePhotoButton",value:function(){var t=this;this.deletePhotoButton.addEventListener("click",function(e){e.preventDefault(),t.image.setAttribute("src",""),t.image.classList.remove("visible"),t.deletePhotoButton.classList.add("disabled"),t.downloadPhotoButton.classList.add("disabled"),t.video.play()})}},{key:"showVideo",value:function(){this.hideUI(),this.video.classList.add("visible"),this.controls.classList.add("visible")}},{key:"takeSnapshot",value:function(){var t=document.querySelector("canvas"),e=t.getContext("2d"),n=this.video.videoWidth,a=this.video.videoHeight;if(n&&a)return t.width=n,t.height=a,e.drawImage(this.video,0,0,n,a),t.toDataURL("image/png")}},{key:"displayErrorMessage",value:function(t,e){e=e||"",e&&console.error(e),this.errorMessage.innerText=t,this.hideUI(),this.errorMessage.classList.add("visible")}},{key:"hideUI",value:function(){this.controls.classList.remove("visible"),this.startCameraButton.classList.remove("visible"),this.video.classList.remove("visible"),this.errorMessage.classList.remove("visible")}}]),t}();e.a=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(10),o=n(6),i=n(7),r=n(2),s=n(11),l=n(9),u=window.location.href;switch(!0){case u.endsWith("local"):a.a.init(),r.a.instantiateFeather();break;case u.endsWith("google-drive"):l.a.init(),r.a.instantiateFeather();break;case u.endsWith("dropbox"):o.a.addClickEvent(),r.a.instantiateFeather();break;case u.endsWith("onedrive"):i.a.addClickEvent(),r.a.instantiateFeather();break;case u.endsWith("selfie"):s.a.init()}}]);