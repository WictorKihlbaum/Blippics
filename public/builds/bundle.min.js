!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t){e.exports=jQuery},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(3),i=n(4),r=n(2),s=n(0),u=n.n(s),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=function(){function e(){a(this,e)}return l(e,null,[{key:"addButtons",value:function(e){this.addEditButton(e),this.addDownloadButton(e);var t=window.location.href;t.includes("dropbox")?this.addSaveButtonDropbox(e):t.includes("onedrive")&&this.addSaveButtonOneDrive(e)}},{key:"removeButtons",value:function(){u()("#edit-button").remove(),u()("#download-button").remove(),u()("#save-button").remove()}},{key:"addEditButton",value:function(e){u()("#edit-button-field").html('\n\t\t\t<a href="#"\n\t\t\t   id="edit-button"\n\t\t\t\t aria-label="Edit image"\n\t\t\t\t title="Edit image"\n\t\t\t   class="mdl-button\n\t\t\t\t        mdl-js-button\n\t\t\t\t        mdl-button--fab\n\t\t\t\t        mdl-button--primary\n\t\t\t\t\t\t\t\tanimated bounceIn">\n\t\t\t  <i class="material-icons">\n\t\t\t\t  edit\n\t\t\t\t</i>\n\t\t\t</a>\n\t\t'),u()("#edit-button").click(function(){r.a.launchEditor("editable-image",""+e)})}},{key:"addDownloadButton",value:function(e){u()("#download-button-field").html('\n\t\t\t<a href="'+e+'" download\n\t\t\t   id="download-button"\n\t\t\t\t aria-label="Download image"\n\t\t\t\t title="Download image"\n\t\t\t   class="mdl-button\n\t\t\t\t        mdl-js-button\n\t\t\t\t        mdl-button--fab\n\t\t\t\t        mdl-button--primary\n\t\t\t\t\t\t\t\tanimated bounceIn">\n\t\t\t  <i class="material-icons">\n\t\t\t\t  file_download\n\t\t\t\t</i>\n\t\t\t</a>\n\t\t')}},{key:"addSaveButtonDropbox",value:function(e){u()("#save-button-field").html('\n      <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--primary has-hover"\n              id="save-button"\n              aria-label="Save image on Dropbox"\n              title="Save image on Dropbox">\n        <i class="material-icons" id="save-icon">\n          cloud_upload\n        </i>\n      </button>\n    '),u()("#save-button").click(function(){Dropbox.save(o.a.getSaverOptions(""+e))})}},{key:"addSaveButtonOneDrive",value:function(e){u()("#save-button-field").html('\n      <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--primary has-hover"\n              id="save-button"\n              aria-label="Save image on OneDrive"\n              title="Save image on OneDrive">\n        <i class="material-icons" id="save-icon">\n          cloud_upload\n        </i>\n      </button>\n    '),u()("#save-button").click(function(){i.a.launchOneDriveSaver(""+e)})}},{key:"reStyleSaveButton",value:function(){var e=u()("#save-button");e.attr("title","Image is saved"),e.attr("aria-label","Image is saved"),e.css("color","#2196F3"),e.attr("disabled",!0),u()("#save-icon").html("done"),e.css("background-color"),e.removeClass("has-hover")}}]),e}();t.a=c},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(1),i=n(10),r=n.n(i),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(){function e(){a(this,e)}return s(e,null,[{key:"instantiateFeather",value:function(){var e=this;this.feather=new Aviary.Feather({apiKey:r.a.Aviary,theme:"minimum",tools:"all",appendTo:"",displayImageSize:!0,showWaitIndicator:!0,launchDelay:500,closeDelay:500,onSave:function(t,n){e.newURL=n,$("#"+t).attr("src",n),e.handleButtons(t,n),e.feather.close()},onClose:function(t){t&&!window.location.href.endsWith("google-drive")&&o.a.addEditButton(e.newURL)},onError:function(e){Message.show(e.message,"user-message-error")}})}},{key:"handleButtons",value:function(e,t){var n=window.location.href;switch(!0){case n.endsWith("local"):o.a.addDownloadButton(t);break;case n.endsWith("dropbox"):o.a.addButtons(t);break;case n.endsWith("onedrive"):o.a.addButtons(t);break;case n.endsWith("google-drive"):GoogleDriveHandler.addActionButtons(e,t)}}},{key:"launchEditor",value:function(e,t){return this.feather.launch({image:e,url:t}),!1}}]),e}();t.a=u},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=n(1),s=n(6),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(){function e(){a(this,e)}return u(e,null,[{key:"getChooserOptions",value:function(){var e=this;return{success:function(t){var n=t[0].link;e.image=t[0],i()("#editable-image").attr("src",n),r.a.removeButtons(),r.a.addEditButton(n)},linkType:"direct",multiselect:!1,extensions:[".png",".jpg",".jpeg"]}}},{key:"getSaverOptions",value:function(e){return{files:[{url:""+e,filename:""+this.image.name}],success:function(){i()(".spinner").addClass("is-hidden");var e="Image was successfully uploaded to your Dropbox!";s.a.showSuccess(e),r.a.reStyleSaveButton()},progress:function(e){i()(".spinner").removeClass("is-hidden")},error:function(e){Message.show(e,"user-message-error")}}}},{key:"addClickEvent",value:function(){var e=this;i()("#choose-button").click(function(){Dropbox.choose(e.getChooserOptions())})}}]),e}();t.a=l},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=n(1),s=n(5),u=n(6),l=n(10),c=n.n(l),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=function(){function e(){a(this,e)}return d(e,null,[{key:"launchOneDrivePicker",value:function(){var e={clientId:"c3e33c0d-c915-4e56-bbb5-52c74f7d040e",action:"download",advanced:{},success:function(e){var t=e.value[0]["@microsoft.graph.downloadUrl"];i()("#editable-image").attr("src",t),r.a.removeButtons(),r.a.addEditButton(t)},error:function(e){s.a.show(e,"user-message-error")}};OneDrive.open(e)}},{key:"launchOneDriveSaver",value:function(e){var t={clientId:c.a.OneDrive,action:"save",sourceUri:e,fileName:"testImage.png",openInNewWindow:!0,advanced:{},success:function(e){var t="Image was successfully uploaded to your OneDrive!";u.a.showSuccess(t),i()(".spinner").addClass("is-hidden"),r.a.reStyleSaveButton()},progress:function(e){i()(".spinner").removeClass("is-hidden")},error:function(e){s.a.show(e,"user-message-error")}};OneDrive.save(t)}},{key:"addClickEvent",value:function(){var e=this;i()("#choose-button").click(function(){OneDrive.open(e.launchOneDrivePicker())})}}]),e}();t.a=f},function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(){function e(){a(this,e)}return r(e,null,[{key:"init",value:function(){this.field=i()("#user-message-field")}},{key:"show",value:function(e,t){var n=this;this.field.html('\n      <div id="'+t+'" class="user-message animated flash">\n        '+e+" "+this.getCloseButton()+"\n\t\t\t</div>\n\t\t"),i()("#close-message-button").click(function(){n.remove()})}},{key:"remove",value:function(){this.field.html("")}},{key:"getCloseButton",value:function(){return'\n      <i class="material-icons"\n\t\t\t   id="close-message-button"\n\t\t\t   title="Close message"\n\t\t\t\t aria-label="Close message">\n        close\n\t\t\t</i>\n\t\t'}}]),e}();e.onload=s.init(),t.a=s}).call(t,n(8)(e))},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n.n(o),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(){function e(){a(this,e)}return r(e,null,[{key:"showSuccess",value:function(e){var t=i()("#success-toast")[0],n={message:e,timeout:1e4};t.MaterialSnackbar.showSnackbar(n)}}]),e}();t.a=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(5),i=n(1),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(){function e(){a(this,e)}return r(e,null,[{key:"init",value:function(){this.dropArea=$("#dropzone"),this.preview=$("#editable-image"),this.fileInput=$("#input"),this.defaultImagePath="/images/placeholder_image.png",this.invalidImageError="Invalid file! The file has to be a Png or Jpg/Jpeg image. Please try again.",this.setupDroparea()}},{key:"setupDroparea",value:function(){var e=this;this.dropArea.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}).on("click",function(t){e.fileInput.click()}).on("dragover",function(t){e.dropArea.css("background-color","#E4F1FE")}).on("dragleave",function(t){e.dropArea.css("background-color","white")}).on("drop",function(t){e.dropArea.css("background-color","white");var n=t.originalEvent.dataTransfer.files[0];e.handleFile(n)}),this.fileInput.on("change",function(t){var n=t.originalEvent.target.files[0];n&&e.handleFile(n)})}},{key:"handleFile",value:function(e){this.isValidImageFormat(e)?(o.a.remove(),i.a.removeButtons(),e?this.createFileReader(e):(this.resetPreview(),i.a.removeButtons())):(o.a.show(this.invalidImageError,"user-message-error"),this.resetPreview(),i.a.removeButtons())}},{key:"createFileReader",value:function(e){var t=this,n=new FileReader;n.onload=function(){t.hideSpinner(),t.updatePreview(n.result),i.a.addEditButton(n.result)},n.onprogress=function(){t.showSpinner()},n.onerror=function(e){o.a.show(e,"user-message-error")},n.readAsDataURL(e)}},{key:"isValidImageFormat",value:function(e){return["image/png","image/jpg","image/jpeg"].includes(e.type)}},{key:"updatePreview",value:function(e){this.preview.attr("src",e)}},{key:"resetPreview",value:function(){this.preview.attr("src",this.defaultImagePath)}},{key:"showSpinner",value:function(){$(".spinner").removeClass("is-hidden")}},{key:"hideSpinner",value:function(){$(".spinner").addClass("is-hidden")}}]),e}();t.a=s},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=n(3),i=n(4),r=n(2),s=n(11),u=window.location.href;switch(!0){case u.endsWith("local"):a.a.init(),r.a.instantiateFeather();break;case u.endsWith("dropbox"):o.a.addClickEvent(),r.a.instantiateFeather();break;case u.endsWith("onedrive"):i.a.addClickEvent(),r.a.instantiateFeather();break;case u.endsWith("selfie"):s.a.init()}},function(e,t){e.exports={Aviary:"eb5f4fca52634bbf94da9389bd974012",OneDrive:"c3e33c0d-c915-4e56-bbb5-52c74f7d040e"}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){a(this,e)}return o(e,null,[{key:"init",value:function(){this.setupVariables(),this.isBrowserSupported()?(this.requestCamera(),this.setupButtons()):this.displayErrorMessage("\n        Your browser doesn't have support for\n        the navigator.getUserMedia interface.\n      ")}},{key:"setupVariables",value:function(){this.video=$("#camera-stream")[0],this.image=$("#snap")[0],this.startCameraButton=$("#start-camera")[0],this.controls=$(".controls")[0],this.takePhotoButton=$("#take-photo")[0],this.deletePhotoButton=$("#delete-photo")[0],this.downloadPhotoButton=$("#download-photo")[0],this.errorMessage=$("#error-message")[0],this.snap=null}},{key:"isBrowserSupported",value:function(){return navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!!navigator.getMedia}},{key:"requestCamera",value:function(){var e=this;navigator.getMedia({video:!0},function(t){e.video.src=window.URL.createObjectURL(t),e.video.play(),e.video.onplay=function(){e.showVideo()}},function(t){console.log(t),e.displayErrorMessage("\n          There was an error with accessing\n          the camera stream: "+err.name,t)})}},{key:"setupButtons",value:function(){this.setupStartCameraButton(),this.setupTakePhotoButton(),this.setupDeletePhotoButton()}},{key:"setupStartCameraButton",value:function(){var e=this;this.startCameraButton.addEventListener("click",function(t){t.preventDefault(),e.video.play(),e.showVideo()})}},{key:"setupTakePhotoButton",value:function(){var e=this;this.takePhotoButton.addEventListener("click",function(t){t.preventDefault(),e.snap=e.takeSnapshot(),e.image.setAttribute("src",e.snap),e.image.classList.add("visible"),e.deletePhotoButton.classList.remove("disabled"),e.downloadPhotoButton.classList.remove("disabled"),e.downloadPhotoButton.href=e.snap,e.video.pause()})}},{key:"setupDeletePhotoButton",value:function(){var e=this;this.deletePhotoButton.addEventListener("click",function(t){t.preventDefault(),e.image.setAttribute("src",""),e.image.classList.remove("visible"),e.deletePhotoButton.classList.add("disabled"),e.downloadPhotoButton.classList.add("disabled"),e.video.play()})}},{key:"showVideo",value:function(){this.hideUI(),this.video.classList.add("visible"),this.controls.classList.add("visible")}},{key:"takeSnapshot",value:function(){var e=document.querySelector("canvas"),t=e.getContext("2d"),n=this.video.videoWidth,a=this.video.videoHeight;if(n&&a)return e.width=n,e.height=a,t.drawImage(this.video,0,0,n,a),e.toDataURL("image/png")}},{key:"displayErrorMessage",value:function(e,t){t=t||"",t&&console.error(t),this.errorMessage.innerText=e,this.hideUI(),this.errorMessage.classList.add("visible")}},{key:"hideUI",value:function(){this.controls.classList.remove("visible"),this.startCameraButton.classList.remove("visible"),this.video.classList.remove("visible"),this.errorMessage.classList.remove("visible")}}]),e}();t.a=i}]);